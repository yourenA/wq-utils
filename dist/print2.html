<!DOCTYPE html>
<html>
<head>
    <meta charset=" utf-8">
    <meta name="author" content="http://www.softwhy.com/"/>
    <title>万泉打印</title>
    <style type="text/css">
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        .datalist {
            table-layout: fixed;
            width: 100%;
            border: 1px solid #000000; /* 表格边框 */
            border-collapse: collapse; /* 边框重叠 */
            font-weight: bold;
            color: #4f4f4f;
        }

        .datalist th {
            width: 11.11%;
            border: 1px solid #000000; /* 行、列名称边框 */
        }

        td, th {
            border: 1px solid #464646; /* 行、列名称边框 */
            padding: 9px 2px;
            height: 40px;
            text-align: center;
            overflow: hidden;
            white-space: nowrap;
        }

        .table-top {
            display: flex;
            margin-bottom: 12px;
            font-weight: bold;

        }

        .table-top p {
            white-space: nowrap;
            overflow: hidden;
            margin-right: 10px;
        }

        .address {
            width: 60%;
        }

        .number {
            width: 30%;
        }

        .gaizhang {
            width: 10%;
            text-align: right;
        }

        h3 {
            text-align: center;
            margin: 10px;
            margin-bottom: 20px;
            font-size: 34px;
            font-weight: normal;
            color: #3d3d3b;
        }

        #print-box {
            width: 1050px;
            margin: 0 auto;
            font-size: 16px;
            color: #4f4f4f;
        }

        .time, .operater, .shouyin {
            width: 33%;
            margin-top: 15px;
        }

        #yhmc, #yhbh, #jfrq, #sjh, #skr, #kpr {
            width: 25%;
        }

        #dysj {
            width: 50%;
        }
    </style>
</head>
<body>
<div id="print-box">
    <h3>吐鲁番万泉水务有限公司用户缴费回单</h3>
    <div class="table-top">
        <p class="address" id="dz">地址:巴格日路-巴格日村-巴格日村&#45;&#45;阿力木·吐尔逊（商业）</p>
        <p class="number" id="hdbh">回单编号:2020115022933210</p>
        <p class="gaizhang">盖章有效</p>
    </div>
    <table class="datalist" summary="财政报表">
        <tbody>
        <tr>
            <td style="width: 120px">用户编号</td>
            <td colspan="2" id="yhbh">61011909290001</td>
            <td style="width: 120px">用户姓名</td>
            <td  colspan="2" id="yhxm">买买提.买买提.买买提.买买提买买提买买提买买提</td>
            <td style="width: 150px">用户电话</td>
            <td  colspan="2" id="yhdh">13265958173</td>
        </tr>
        <tr>
            <td>表计编号</td>
            <td  colspan="2" id="bjbh">61011909290001</td>
            <td >水价类型</td>
            <td  colspan="2" id="sjlx">类型一</td>
            <td >结算日期</td>
            <td  colspan="2"  id="jsrq">2010-12-05</td>
        </tr>
        <tr>
            <td>上期读数</td>
            <td >本期读数</td>
              <td>上期余额</td>
                  <td >本期余额</td>
                  <td>价格</td>
                  <td>价格阶梯</td>
                  <td >数量(立方米)</td>
          <td  colspan="2" id="sl"></td>

        </tr>
        <tr>
            <td id="sqds"></td>
            <td   id="bqds"></td>
            <td id="sqye"></td>
            <td  id="bqye"></td>
            <td id="jg"></td>
            <td    id="jgjt">1</td>
            <td    >收款方式</td>
            <td    id="skfs"  colspan="2">预付</td>
        </tr>
        <tr>
            <td >费用名称</td>
            <td >数量</td>
            <td >天数</td>
            <td >月数</td>
            <td >收费月份</td>
            <td >单价</td>
            <td >金额</td>
            <td colspan="2">说明</td>
        </tr>
        <tr class="qt">
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td colspan="2"></td>
        </tr>
        <tr  class="qt">
            <td></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td colspan="2" ></td>
        </tr>
        <tr  class="qt">
            <td></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td ></td>
            <td  colspan="2"></td>
        </tr>
        <tr >
            <td colspan="2">合计人民币(大写)</td>
            <td  colspan="5" id="hjrmb"></td>
            <td colspan="2" id="hjrmb2">￥:1235.45</td>
        </tr>
    </table>
    <div class="table-top">
        <p class="time" id="dysj">打印时间:</p>
        <p class="operater" id="czy">操作员:</p>
        <p class="shouyin" id="syy">收银员:</p>
    </div>
</div>
<!-- <div id="print-box">
    <h3>吐鲁番万泉供排水公司水费收款收据</h3>
    <div class="table-top">
        <p id="yhmc">用户名称：吐鲁番恒久房地产开发有限公司</p>
        <p id="yhbh">用户编号：04192145310</p>
        <p id="jfrq">缴费日期：2018-12-05</p>
        <p id="sjh">收据号：5044090125762422</p>
    </div>
    <table class="datalist" summary="财政报表">
        <tbody>
        <tr>
            <td colspan="2">用水性质</td>
            <td style="width: 120px">上期读数</td>
            <td style="width: 120px">本期读数</td>
            <td style="width: 120px">实际水量</td>
            <td style="width: 120px">单价</td>
            <td style="width: 120px">金额</td>
            <td style="width: 120px"></td>
        </tr>
        <tr>
            <td colspan="2">预存水费</td>
            <td style="width: 120px" id="sqds"></td>
            <td style="width: 120px" id="bqds"></td>
            <td style="width: 120px" id="sjsl"></td>
            <td style="width: 120px" id="dj"></td>
            <td style="width: 120px" id="je"></td>
            <td style="width: 120px"></td>
        </tr>
        <tr>
            <td style="width: 120px">上期结余</td>
            <td style="width: 120px" id="sqjy"></td>
            <td style="width: 120px">本次应收</td>
            <td style="width: 120px" id="bcys"></td>
            <td style="width: 120px">本次实收</td>
            <td style="width: 120px" id="bcss"></td>
            <td style="width: 120px">本次结余</td>
            <td style="width: 120px" id="bcjy"></td>
        </tr>
    </table>
    <div class="table-top">
        <p class="time" id="dysj">打印时间：</p>
        <p class="operater" id="skr">收款人：</p>
        <p class="shouyin" id="kpr">开票人：</p>
    </div>
</div> -->
<script>
    function fixZero(value) {
        if (Number(value) < 10) {
            return "0" + value
        } else {
            return value
        }
    }

    function GetDate(format) {
        /**
         * format=1表示获取年月日
         * format=0表示获取年月日时分秒
         * **/
        var _time = ''
        var now = new Date();
        var year = now.getFullYear();
        var month = now.getMonth() + 1;
        var date = now.getDate();
        var day = now.getDay();//得到周几
        var hour = now.getHours();//得到小时
        var minu = now.getMinutes();//得到分钟
        var sec = now.getSeconds();//得到秒
        if (format == 1) {
            _time = year + "-" + month + "-" + date
        } else if (format == 2) {
            _time = year + "-" + fixZero(month) + "-" + fixZero(date) + " " + fixZero(hour) + ":" + fixZero(minu) + ":" + fixZero(sec)
        }
        return _time
    }

    //获取地址栏参数，name:参数名称
    function getUrlParms(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return decodeURIComponent(r[2]);
        return '';
    }

    function convertCurrency(money) {
        //汉字的数字
        var cnNums = new Array('零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖');
        //基本单位
        var cnIntRadice = new Array('', '拾', '佰', '仟');
        //对应整数部分扩展单位
        var cnIntUnits = new Array('', '万', '亿', '兆');
        //对应小数部分单位
        var cnDecUnits = new Array('角', '分', '毫', '厘');
        //整数金额时后面跟的字符
        var cnInteger = '整';
        //整型完以后的单位
        var cnIntLast = '元';
        //最大处理的数字
        var maxNum = 999999999999999.9999;
        //金额整数部分
        var integerNum;
        //金额小数部分
        var decimalNum;
        //输出的中文金额字符串
        var chineseStr = '';
        //分离金额后用的数组，预定义
        var parts;
        if (money == '') {
            return '';
        }
        money = parseFloat(money);
        if (money >= maxNum) {
            //超出最大处理数字
            return '';
        }
        if (money == 0) {
            chineseStr = cnNums[0] + cnIntLast + cnInteger;
            return chineseStr;
        }
        //转换为字符串
        money = money.toString();
        if (money.indexOf('.') == -1) {
            integerNum = money;
            decimalNum = '';
        } else {
            parts = money.split('.');
            integerNum = parts[0];
            decimalNum = parts[1].substr(0, 4);
        }
        //获取整型部分转换
        if (parseInt(integerNum, 10) > 0) {
            var zeroCount = 0;
            var IntLen = integerNum.length;
            for (var i = 0; i < IntLen; i++) {
                var n = integerNum.substr(i, 1);
                var p = IntLen - i - 1;
                var q = p / 4;
                var m = p % 4;
                if (n == '0') {
                    zeroCount++;
                } else {
                    if (zeroCount > 0) {
                        chineseStr += cnNums[0];
                    }
                    //归零
                    zeroCount = 0;
                    chineseStr += cnNums[parseInt(n)] + cnIntRadice[m];
                }
                if (m == 0 && zeroCount < 4) {
                    chineseStr += cnIntUnits[q];
                }
            }
            chineseStr += cnIntLast;
        }
        //小数部分
        if (decimalNum != '') {
            var decLen = decimalNum.length;
            for (var i = 0; i < decLen; i++) {
                var n = decimalNum.substr(i, 1);
                if (n != '0') {
                    chineseStr += cnNums[Number(n)] + cnDecUnits[i];
                }
            }
        }
        if (chineseStr == '') {
            chineseStr += cnNums[0] + cnIntLast + cnInteger;
        } else if (decimalNum == '') {
            chineseStr += cnInteger;
        }
        return chineseStr;
    }
</script>
<script>
document.querySelector('#dz').innerHTML = "地址" + getUrlParms('dz');//地址
document.querySelector('#hdbh').innerHTML = "回单编号" + getUrlParms('yhbh');//回单编号
document.querySelector('#yhbh').innerHTML = getUrlParms('yhbh');//上期读数
document.querySelector('#yhxm').innerHTML = getUrlParms('yhxm');//本期读数
document.querySelector('#yhdh').innerHTML = getUrlParms('yhdh');//实际水量
document.querySelector('#bjbh').innerHTML = getUrlParms('bjbh');//单价
document.querySelector('#sjlx').innerHTML = getUrlParms('sjlx');//金额
document.querySelector('#jsrq').innerHTML = getUrlParms('jsrq');//金额
document.querySelector('#sqds').innerHTML = getUrlParms('sqds');//金额
document.querySelector('#bqds').innerHTML = getUrlParms('bqds');//金额
document.querySelector('#sqye').innerHTML = getUrlParms('sqye');//金额
document.querySelector('#bqye').innerHTML = getUrlParms('bqye');//金额
document.querySelector('#jg').innerHTML = getUrlParms('jg');//金额
document.querySelector('#jgjt').innerHTML = getUrlParms('jgjt');//金额
document.querySelector('#sl').innerHTML = getUrlParms('sl');//金额
document.querySelector('#skfs').innerHTML = getUrlParms('skfs');//金额
document.querySelector('#hjrmb').innerHTML = convertCurrency(getUrlParms('hjrmb'));//金额

if (getUrlParms('hjrmb')) {
    document.querySelector('#hjrmb2').innerHTML = "￥ " + getUrlParms('hjrmb');//本次结余
}
document.querySelector('#dysj').innerHTML = "打印时间：" + GetDate(2);
document.querySelector('#czy').innerHTML = "操作员：" + getUrlParms('czy');//开票人
document.querySelector('#syy').innerHTML = "收银员：" + getUrlParms('syy');//开票人
console.log(getUrlParms('qt'))

if(getUrlParms('qt')){
  console.log(JSON.parse(getUrlParms('qt')))
  var qt=JSON.parse(getUrlParms('qt'));
  for(var i=0;i<qt.length;i++){
    console.log(qt[i]);
    var qtTr=document.querySelectorAll('.qt')[i];
    console.log(qtTr);
    if(!qtTr){
      break
    }
    if(qt[i].fymc){
        qtTr.querySelectorAll('td')[0].innerHTML=qt[i].fymc
    }
    if(qt[i].sl){
        qtTr.querySelectorAll('td')[1].innerHTML=qt[i].sl
    }
    if(qt[i].ts){
        qtTr.querySelectorAll('td')[2].innerHTML=qt[i].ts
    }
    if(qt[i].ys){
        qtTr.querySelectorAll('td')[3].innerHTML=qt[i].ys
    }
    if(qt[i].sfyf){
        qtTr.querySelectorAll('td')[4].innerHTML=qt[i].sfyf
    }
    if(qt[i].dj){
        qtTr.querySelectorAll('td')[5].innerHTML=qt[i].dj
    }
    if(qt[i].je){
        qtTr.querySelectorAll('td')[6].innerHTML=qt[i].je
    }
    if(qt[i].sm){
        qtTr.querySelectorAll('td')[7].innerHTML=qt[i].sm
    }
  }
}
window.print();
    //
    // return 1;
    // document.querySelector('#yhmc').innerHTML = "用户名称：" + getUrlParms('yhmc');//用户名称
    // document.querySelector('#yhbh').innerHTML = "用户编号：" + getUrlParms('yhbh');//用户编号
    // document.querySelector('#jfrq').innerHTML = "缴费日期：" + getUrlParms('jfrq');//缴费日期
    // document.querySelector('#sjh').innerHTML = "收据号：" + getUrlParms('sjh');//收据号
    // document.querySelector('#sqds').innerHTML = getUrlParms('sqds');//上期读数
    // document.querySelector('#bqds').innerHTML = getUrlParms('bqds');//本期读数
    // document.querySelector('#sjsl').innerHTML = getUrlParms('sjsl');//实际水量
    // document.querySelector('#dj').innerHTML = getUrlParms('dj');//单价
    // document.querySelector('#je').innerHTML = getUrlParms('je');//金额
    // if (getUrlParms('sqjy')) {
    //     document.querySelector('#sqjy').innerHTML = "￥ " + getUrlParms('sqjy');//金额
    // }
    //
    // if (getUrlParms('bcys')) {
    //     document.querySelector('#bcys').innerHTML = "￥ " + getUrlParms('bcys');//本次应收
    // }
    // if (getUrlParms('bcss')) {
    //     document.querySelector('#bcss').innerHTML = "￥ " + getUrlParms('bcss');//本次实收
    // }
    // if (getUrlParms('bcjy')) {
    //     document.querySelector('#bcjy').innerHTML = "￥ " + getUrlParms('bcjy');//本次结余
    // }
    //
    // document.querySelector('#dysj').innerHTML = "打印时间：" + GetDate(2);
    // document.querySelector('#skr').innerHTML = "收款人：马燕"
    // document.querySelector('#kpr').innerHTML = "开票人：" + getUrlParms('kpr');//开票人
    //
    // window.print();
</script>
</body>
</html>
